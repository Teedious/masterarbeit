\subsection{Petri-Netze}\label{sec:petri}
Es gibt einige Ansätze zur Modellierung verteilter oder nebenläufiger Programme. Darunter finden sich auch Petri-Netze~\cite{Murata1989}. Mit einem Petrinetz kann ein modelliertes Programm mathematisch formal definiert und analysiert werden. Der Begriff Petri-Netz beschreibt auch eine Familie von verwandten Modellen. Das hier im Folgenden beschriebene Petri-Netz Modell wird auch Platz-Transitions-Netz (PT-Netz) genannt. Formal lässt sich ein PT-Netz $N$ als 5-Tupel $ N=(P,T,F,W,m_0)$ beschreiben. Dabei sind 
\begin{align*}
	&P  \quad \text{eine endliche Menge von Plätzen,}\\
	&T  \quad \text{eine endliche Menge von Transitionen,}\\
	&F \subseteq (P\times T) \cup (T \times P) \quad \text{die Menge der Relationen zwischen Plätzen und Transitionen,}\\
	&W: F \mapsto \N  \quad \text{eine Gewichtungsfunktion der Relationen und}\\
	&m_0: P \mapsto \N_0   \quad \text{die anfängliche Markierung der Plätze~\cite{Murata1989}.}\\
\end{align*}
Der durch ein PT-Netz beschriebene Graph kann auch grafisch dargestellt werden. Die Plätze $p \in P$ werden dabei als Kreise dargestellt, die Transitionen $ t \in T$ durch schwarz gefüllte Rechtecke, die Relationen $ f \in F$ durch gerichtete Kanten zwischen den Kreisen und Rechtecken, wobei die Elemente der Gewichtungsfunktion $W$ an die jeweiligen Kanten gesetzt werden. Die Markierung wird durch schwarze Punkte in den Plätzen dargestellt. Abbildung~\vref{fig:petrinet} zeigt ein simples Beispiel eines PT-Netzes  formal beschrieben (Abbildung~\vref{fig:petrinet:formal}) und seine grafische Repräsentation (Abbildung~\vref{fig:petrinet:graph}).
\begin{figure}
	\centering
	\begin{subfigure}[b]{.48\textwidth}
		$\begin{aligned}
			N &= (P,T,F,W,m_0)\\
			P &= \{p_1, p_2\}\\
			T &= \{t_1, t_2\}\\
			F &= \{(p_1, t_1), (p_2, t_2), (t_1, p_2)\}\\
			W &= \{((p_1, t_1),1), ((p_2, t_2),2), ((t_1, p_2), 1)\}\\
			m_0 &= \{(p_1, 1), (p_2, 0)\}
		\end{aligned}$
		\subcaption{}\label{fig:petrinet:formal}
	\end{subfigure}
	\hfill
	\begin{subfigure}[b]{.48\textwidth}
		\begin{tikzpicture}
			\node[place, label=$p_1$, tokens=1] (p1) at (0,0) {};
			\node[transV,label=$t_1$, right = of p1] (t1){};
			\node[place, label=$p_2$, right = of t1] (p2) {};
			\node[transV,label=$t_2$, right = of p2] (t2){};

			\draw 
			(p1) edge[post] node[above] {1} (t1)
			(t1) edge[post] node[above] {2} node[below=1cm] {$N$} (p2)
			(p2) edge[post] node[above] {1} (t2);
		\end{tikzpicture}
		\subcaption{}\label{fig:petrinet:graph}
	\end{subfigure}
	\caption{}\label{fig:petrinet}
\end{figure}

\subsubsection{Transitionsregel} Um nun das Verhalten von Programmen beschreiben zu können, kann die Markierung eines Petrinetzes anhand der folgenden sogenannten Transitions-Regel geändert werden~\cite{Murata1989}.
\begin{enumerate}
	\item Eine Transition $t_i \in T$ heißt \emph{aktiviert}, wenn für alle $(p,t_i) \in F $ gilt $ W((p,t_i)) \leq M(p)$ wobei $M$ die aktuelle Markierung ist. Es müssen also in allen Plätzen mit eingehenden Kanten genügend Marken bezüglich der Gewichtungsfunktion existieren. Diese Plätze werden auch \emph{Vorbedingungen} für die Transition genannt. Wenn ein Platz genügend Marken für eine Transition enthält, nennt man die Vorbedingungen (bezüglich dieser Transition) \emph{erfüllt}.
	\item Eine aktivierte Transition kann, muss aber nicht \emph{feuern}.
	\item Feuert eine aktivierte Transition $t_i$, geht eine Markierung $M$ in eine Markierung $M'$ über. Dies erfolgt nach den folgenden Regeln.
	\begin{enumerate}
		\item $P$ wird in die disjunkten Mengen $P_\emptyset, P_\rightarrow, P_\leftarrow, P_\leftrightarrow$ unterteilt, wobei 
		\item $P_\emptyset = \{p \in P | (p,t_i) \notin F \land (t_i,p) \notin F\}$ die unbeteiligten Plätze sind,
		\item $P_\rightarrow = \{p \in P | (p,t_i) \in F \land (t_i,p) \notin F\}$ die Plätze mit eingehenden Kanten zur Transition,
		\item $P_\leftarrow = \{p \in P | (p,t_i) \notin F \land (t_i,p) \in F\}$ die Plätze mit ausgehenden Kanten aus der Transition und 
		\item $P_\leftrightarrow = \{p \in P | (p,t_i) \in F \land (t_i,p) \in F\}$ die Plätze mit eingehenden und ausgehenden Kanten.
		\item Dann gilt $
			M'(p) = \left\{ 
				\begin{aligned}
					& M(p) && \; , \; p \in P_\emptyset\\
					& M(p)-W((p,t_i)) && \; , \; p \in P_\rightarrow\\
					&M(p)+W((t_i,p)) && \; , \; p \in P_\leftarrow\\
					& M(p)-W((p,t_i))+W((t_i,p)) && \; , \; p \in P_\leftrightarrow
				\end{aligned}
				\right\}
		$
	\end{enumerate}
\end{enumerate}
Betrachtet man Abbildung~\vref{fig:petrinet} erneut, lässt sich erkennen, dass Transition $t_1$ aktiviert ist und Transition $t_2$ nicht, da in $p_2$ keine Marken sind.

\subsubsection{Erreichbarkeitsgraph}
Mittels der Transitionsregel lassen sich in einem Petri-Netz $N$ ausgehend von der Anfangsmarkierung $m_0$ gegebenenfalls weitere Markierungen erzeugen. Durch die wiederholte Anwendung der Transitionsregel auf alle daraus entstehenden Markierungen lässt sich ein Graph erstellen, der alle von der Anfangsmarkierung aus erreichbaren Markierungen erhält, den \emph{Erreichbarkeitsgraph} $\E{N}$ des Petri-Netzes.
\begin{figure}
	\begin{tikzpicture}[node distance=5mm,auto,state/.append style={rounded rectangle}]
		\node[state, initial] (q1) {$\{(p_1,1),(p_2,0)\}$};
		\node[state] (q2) [right=of q1] {$\{(p_1,0),(p_2,2)\}$};
		\node[state] (q3) [right=of q2] {$\{(p_1,0),(p_2,1)\}$};
		\node[state] (q4) [right=of q3] {$\{(p_1,0),(p_2,0)\}$};
		\path[->] 
		(q1) edge node {$t_1$} (q2)
		(q2) edge node {$t_2$} node[below=6mm] {Graph mit vollständigen Knotenbezeichnungen}(q3)
		(q3) edge node {$t_2$} (q4);

		\node[state,initial] (q5) [below=1.2cm of q1]{$(1,0)$};
		\node[state] (q6) [below=1.2cm of q2] {$(0,2)$};
		\node[state] (q7) [below=1.2cm of q3] {$(0,1)$};
		\node[state] (q8) [below=1.2cm of q4] {$(0,0)$};
		\path[->] 
		(q5) edge node {$t_1$} (q6)
		(q6) edge node {$t_2$} node[below=6mm] {Graph mit gekürzten Knotenbezeichnungen}(q7)
		(q7) edge node {$t_2$} (q8);
		\end{tikzpicture}
		\caption{Erreichbarkeitsgraph des Petri-Netzes aus Abbildung~\vref{fig:petrinet}. Der Graph ist zweimal dargestellt. Oben enthalten die Knoten des Graphen die vollständige Auszeichnung der Markierung, unten wird die Kurzschreibweise für die Knotenbezeichnungen genutzt, in der die Position den Platz kodiert. Der \enquote{start} Pfeil kennzeichnet die anfängliche Markierung.}\label{fig:reachability}
\end{figure}
In Abbildung~\vref{fig:reachability} wird der Erreichbarkeitsgraph des in Abbildung~\vref{fig:petrinet} dargestellten Petri-Netzes gezeigt. Die Knoten des Graphen sind die Markierungen des Petri-Netzes, die durch die Transitionsregel erreicht werden können. Da die Plätze des Petri-Netzes nummeriert sind, kann die Markierung verkürzt geschrieben werden, indem der Index des Tupels der Knotenbezeichnung den Platz beschreibt und die Zahl die Anzahl der Marken des Platzes kennzeichnet. In der Abbildung ist oben der Graph mit den vollständigen Markierungsbezeichnungen dargestellt. Unten wird die verkürzte Schreibweise genutzt.

ist die Anzahl der Marken pro Platz in jeder Markierung des Erreichbarkeitsgraphen maximal $1$, kann die Schreibweise weiter verkürzt werden, indem nur die Plätze beziehungsweise die Indizes der Plätze, die eine Marke enthalten genannt werden. Abbildung~\vref{fig:1-bpetrinet} zeigt eine Abwandlung des Petri-Netzes aus Abbildung~\vref{fig:petrinet}, das der gerade beschriebenen Eigenschaft entspricht, und den zugehörigen Erreichbarkeitsgraphen in verkürzter Schreibweise.
\begin{figure}
	\centering
	\begin{subfigure}[b]{.48\textwidth}
		\begin{tikzpicture}
			\node[place, label=$p_1$, tokens=1] (p1) at (0,0) {};
			\node[transV,label=$t_1$, right = of p1] (t1){};
			\node[place, label=$p_2$, right = of t1] (p2) {};
			\node[transV,label=$t_2$, right = of p2] (t2){};

			\draw 
			(p1) edge[post] node[above] {1} (t1)
			(t1) edge[post] node[above] {1} (p2)
			(p2) edge[post] node[above] {1} (t2);
		\end{tikzpicture}
		\subcaption{}\label{fig:1-bpetrinet:graph}
	\end{subfigure}
	\hfill
	\begin{subfigure}[b]{.48\textwidth}
		\begin{tikzpicture}[node distance=5mm,auto,state/.append style={rounded rectangle}]
			\node[state, initial] (q1) {$1$};
			\node[state] (q2) [right=of q1] {$2$};
			\node[state] (q3) [right=of q2] {};
			\path[->] 
			(q1) edge node {$t_1$} (q2)
			(q2) edge node {$t_2$} (q3);
		\end{tikzpicture}
		\subcaption{}\label{fig:1-bpetrinet:reachability}
	\end{subfigure}
\caption{}\label{fig:1-bpetrinet}
\end{figure} 

\subsubsection{Weitere Definitionen}
Um die Arbeit mit Petri-Netzen zu vereinfachen, werden nun noch einige weitere Definitionen eingeführt.

\begin{enumerate}
	\item Die Menge der Knoten mit Kanten zu einem Knoten $k \in P\cup T$ heißt \emph{Vorbereich} des Knotens $k$ und ist definiert als $^\circ k = \{v | (v,k) \in F\}$.
	\item Die Menge der Knoten mit Kanten von einem Knoten $k \in P\cup T$ heißt \emph{Nachbereich} des Knotens $k$ und ist definiert als $k^\circ  = \{n | (k,n) \in F\}$.
	\item Die Menge der Knoten einer Markierung $m$ mit mindesten $n$ Marken $\{x | m(x)\geq n\}$ wird $M_{\geq n}$ genannt.
	\item Das Maximum einer Markierung $m$, $\deg(m) \coloneqq \max \{m(p)|p\in P\}$, wird ihr \emph{Grad} genannt.
	\item Ein Petri-Netz $N$ heißt \emph{$n$-beschränkt}, wenn $n$ das Maximum der Grade der Markierungen des Erreichbarkeitsgraphen $(V,K)=\E{N}$ ist, also $n = \max\{\deg(m)| m\in V \}$.
	\item Gilt für eine Kante $((a, b),w) \in W$, dass $w = 1$, so kann im dazugehörigen Graphen die Beschriftung entfallen. Kanten ohne Beschriftung haben also ein implizites Gewicht von $1$.
\end{enumerate}



\subsubsection{Erweiterte Petri-Netze}
Um das Konzept von Variablenzugriffen einfacher zu modellieren, führen \textcite{Goel1990} ein erweitertes Petri-Netz Modell ein. Dabei wird das 5-Tupel des Petri-Netzes um die folgenden Komponenten erweitert:
\begin{enumerate}
	\item eine Menge von Variablen $V$,
	\item eine Funktion $L: T \mapsto \Pot(V)$, die \emph{lesenden Zugriff} auf die Variablen modelliert, und
	\item eine Funktion $S: T \mapsto \Pot(V)$, die \emph{schreibenden Zugriff} auf die Variablen modelliert.
\end{enumerate}
$\Pot(V)$ ist dabei die Potenzmenge von $V$, also die Menge aller Teilmengen von $V$.
Ein Beispiel für ein erweitertes Petri-Netz, das ansonsten identisch zu dem Petri-Netz in Abbildung~\vref{fig:petrinet} ist, ist in Abbildung~\vref{fig:augpetrinet} gegeben. Die Formale Definition zeigt die neuen Mengen 
\begin{figure}
\centering
	\begin{minipage}[c]{.49\textwidth}
		$\begin{aligned}
			N &= (P,T,F,W,m_0, V, L, S)\\
			P &= \{p_1, p_2\}\\
			T &= \{t_1, t_2\}\\
			F &= \{(p_1, t_1), (p_2, t_2), (t_1, p_2)\}\\
			W &= \{((p_1, t_1),1), ((p_2, t_2),2), ((t_1, p_2), 1)\}\\
			m_0 &= \{(p_1, 1), (p_2, 0)\}\\
			V &= \{a,b\}\\
			L &= \{(t_1,\{a,b\}), (t_2,\emptyset)\}\\
			S &= \{(t_1,\{a\}), (t_2,\emptyset)\}
		\end{aligned}$
	\end{minipage}
	\hfill
	\begin{minipage}[c]{.49\textwidth}
		\begin{tikzpicture}
			\node[place, label=$p_1$, tokens=1] (p1) at (0,0) {};
			\node[transV,label=$t_1$, right = of p1, label=below:{\LSset{a,b}{a}}] (t1){};
			\node[place, label=$p_2$, right = of t1] (p2) {};
			\node[transV,label=$t_2$, right = of p2] (t2){};

			\draw 
			(p1) edge[post] node[above] {1} (t1)
			(t1) edge[post] node[above] {2} node[below=2cm] {$N$} (p2)
			(p2) edge[post] node[above] {1} (t2);
		\end{tikzpicture}
	\end{minipage}
	\caption{Beispiel eines erweiterten Petri-Netzes. Links ist die formale Definition gegeben, rechts der dazugehörige Graph. In Platz $p_2$ wird auf die Variablen $a$ und $b$ lesend zugegriffen und auf Variable $a$ schreibend.}\label{fig:augpetrinet}
\end{figure}